<section class="mx-5 lg:mx-40 my-5">
    <div>
        <div class="bg-[#1E1E1E] border-[#2A2A2A] border-2 rounded-lg p-0.5 inline-block">
            <button class="flex items-center gap-2 bg-[#3B82F6] rounded-lg p-1 cursor-default">
                <img class="w-5 h-5" src="/assets/icons/boxBlanca.svg" alt="">
                <p class="font-semibold text-[#FFFFFF]">Inventario</p>
            </button>
        </div>
        <div class="bg-[#1E1E1E] border-[#2A2A2A] border-2 rounded-lg my-5 p-4">
            <div>
                <p class="text-[#FFFFFF] font-semibold">Filtros de Búsqueda</p>
                <p class="text-[#A1A1A1] text-sm">Encuentra coches específicos en tu inventario</p>
            </div>
            <div class="mt-5">
                <form [formGroup]="formularioBusqueda" class="grid grid-cols-1 lg:grid-cols-4 gap-5">
                    <div class="relative">
                        <img class="w-5 h-5 absolute left-2 top-1/2 -translate-y-1/2" src="/assets/icons/lupa.svg" alt="">
                        <input formControlName="textoBusqueda" type="text" placeholder="Buscar modelo..." class="bg-[#2A2A2A] rounded-lg pl-10 pr-2 p-1 w-full text-white focus:outline-none">
                    </div>
                    <div>
                        <select formControlName="marca" class="bg-[#2A2A2A] rounded-lg text-white p-1 w-full focus:outline-none">
                            <option value="todasMarcas">Todas las marcas</option>
                            @for(marca of marcas; track marca) {
                                <option class="bg-[#1E1E1E]" value="{{marca}}">{{marca}}</option>
                            }
                        </select>
                    </div>
                    <div>
                        <select formControlName="estado" class="bg-[#2A2A2A] rounded-lg text-white p-1 w-full focus:outline-none">
                            <option value="todosEstados">Todas los estados</option>
                            <option value="Disponible">Disponible</option>
                            <option value="Vendido">Vendido</option>
                            <option value="Reservado">Reservado</option>
                        </select>
                    </div>
                    <div>
                        <select formControlName="precio" class="bg-[#2A2A2A] rounded-lg text-white p-1 w-full focus:outline-none">
                            <option value="todosPrecios">Todos los precios</option>
                            <option value="Bajo">€0 - €20,000</option>
                            <option value="MedioBajo">€20,000 - €40,000</option>
                            <option value="MedioAlto">€40,000 - €60,000</option>
                            <option value="Alto">€60,000+</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            @for(coche of cochesFiltrados; track coche.id) {
                <div class="bg-[#1E1E1E] border-[#2A2A2A] border-2 rounded-lg">
                    <div class="relative w-full h-48 overflow-hidden">
                        <img class="rounded-t-lg w-full h-full object-cover" [src]="coche.img_url" alt="">
                        <div class="absolute top-2 left-2">
                            @if(coche.estado === 'Disponible') {
                                <div class="bg-[#10B981] text-white text-xs font-semibold px-2 py-1 rounded-lg">Disponible</div>
                            } @else if(coche.estado === 'Vendido') {
                                <div class="bg-[#EF4444] text-white text-xs font-semibold px-2 py-1 rounded-lg">Vendido</div>
                            } @else if(coche.estado === 'Reservado') {
                                <div class="bg-[#F59E0B] text-white text-xs font-semibold px-2 py-1 rounded-lg">Reservado</div>
                            }
                        </div>
                    </div>
                    <div class="p-4">
                        <div>
                            <p class="text-[#A1A1A1]">{{ coche.marca }}</p>
                            <p class="text-[#FFFFFF] font-semibold text-xl">{{ coche.modelo }}</p>
                            <div class="text-[#A1A1A1] flex justify-between w-full my-3">
                                <p>{{ coche.anio }}</p>
                                <p>{{ coche.kilometraje | number:'1.0-0' }} km</p>
                            </div>
                            <p class="text-[#FFFFFF] font-bold text-2xl">€{{ coche.precio }}</p>
                        </div>
                        <div class="mt-3">
                            <button class="flex items-center justify-center p-1 font-semibold gap-2 bg-[#3B82F6] w-full rounded-lg hover:bg-[#2277ff] ease-in-out duration-200">
                                <img class="w-5 h-5" src="/assets/icons/ojo.svg" alt="">
                                <p class="text-white">Ver en detalle</p>
                            </button>
                            <div class="grid grid-cols-4 gap-2">
                                <button class="col-span-3 flex items-center justify-center gap-2 font-semibold border-2 border-[#2A2A2A] p-1 rounded-lg mt-2 hover:bg-[#2e2e2e] ease-in-out duration-200">
                                    <img class="w-5 h-5" src="/assets/icons/editar.svg" alt="">
                                    <p class="text-white">Editar</p>
                                </button>
                                <button (click)="eliminarCoche(coche.id)" class="col-span-1 flex items-center justify-center gap-2 border-2 border-[#EF4444] p-1 rounded-lg mt-2 hover:bg-[#EF4444] ease-in-out duration-200 group">
                                    <svg 
                                        class="w-5 h-5 text-[#EF4444] group-hover:text-white" 
                                        viewBox="0 0 24 24" 
                                        fill="none" 
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                    <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M4 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M6 7H12H18V18C18 19.6569 16.6569 21 15 21H9C7.34315 21 6 19.6569 6 18V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>